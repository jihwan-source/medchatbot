# scenarios/gastroenteritis.yaml
# 급성 장염 문진 시나리오

# 챗봇의 이름과 시작 질문 ID
name: "급성 장염 문진"
initial_question_id: GREETING

# 각 질문 단계(node)들의 목록
nodes:
  - id: GREETING
    text: |
      안녕하세요! OOO 의원 AI 문진 챗봇입니다.
      현재 가장 불편한 증상이 '설사' 또는 '복통'이 맞으실까요?
    type: buttons
    options:
      - text: "네, 맞아요"
        next_id: HPI_ONSET
      - text: "아니요, 다른 증상이에요"
        next_id: END_OTHER_SYMPTOM

  - id: HPI_ONSET
    text: "증상이 언제 처음 시작되었나요?"
    type: buttons
    options:
      - text: "오늘"
        next_id: HPI_DIARRHEA_FREQUENCY
      - text: "어제"
        next_id: HPI_DIARRHEA_FREQUENCY
      - text: "2~3일 전"
        next_id: HPI_DIARRHEA_FREQUENCY
      - text: "4일 이상"
        next_id: HPI_DIARRHEA_FREQUENCY
  
  - id: HPI_DIARRHEA_FREQUENCY
    text: "하루에 설사를 몇 번 정도 하시나요?"
    type: buttons
    options:
      - text: "1~2회"
        next_id: HPI_STOOL_NATURE
      - text: "3~5회"
        next_id: HPI_STOOL_NATURE
      - text: "6회 이상"
        next_id: HPI_STOOL_NATURE

  - id: HPI_STOOL_NATURE
    text: "※ 중요한 질문입니다.\n변에 피나 끈적한 점액질(곱똥)이 섞여 나오나요?"
    type: buttons
    options:
      - text: "네, 섞여 나와요"
        next_id: HPI_FEVER
      - text: "아니요, 그냥 묽은 변이에요"
        next_id: HPI_FEVER

  - id: HPI_FEVER
    text: "열이 나나요? 38°C 이상 고열이 있었거나, 지금 있다면 알려주세요."
    type: buttons
    options:
      - text: "네, 고열이 있어요"
        next_id: HPI_ABDOMINAL_PAIN
      - text: "미열만 있어요"
        next_id: HPI_ABDOMINAL_PAIN
      - text: "열은 없어요"
        next_id: HPI_ABDOMINAL_PAIN
  
  - id: HPI_ABDOMINAL_PAIN
    text: "배가 아프신가요? 아프다면, 배를 쥐어짜는 듯한 통증이나 뒤틀리는 느낌이 있나요?"
    type: buttons
    options:
      - text: "네, 배가 많이 아파요"
        next_id: HPI_NAUSEA_VOMITING
      - text: "조금 불편한 정도예요"
        next_id: HPI_NAUSEA_VOMITING
      - text: "복통은 없어요"
        next_id: HPI_NAUSEA_VOMITING

  - id: HPI_NAUSEA_VOMITING
    text: "구역질(메스꺼움)이나 구토 증상이 있나요?"
    type: buttons
    options:
      - text: "네, 구토를 했어요"
        next_id: RED_FLAG_DEHYDRATION
      - text: "메스껍기만 해요"
        next_id: RED_FLAG_DEHYDRATION
      - text: "둘 다 없어요"
        next_id: RED_FLAG_DEHYDRATION

  - id: RED_FLAG_DEHYDRATION
    text: |
      ※ 안전한 진료를 위해 가장 중요한 질문입니다.
      아래 증상 중 하나라도 해당되는 것이 있다면 꼭 알려주세요.
      1. 물을 마시기 어려울 정도로 기운이 없다.
      2. 일어설 때 심하게 어지럽다.
      3. 소변량이 눈에 띄게 줄었다.
    type: buttons
    options:
      - text: "네, 해당하는 증상이 있어요"
        next_id: PMH_FOOD
      - text: "아니요, 모두 괜찮아요"
        next_id: PMH_FOOD

  - id: PMH_FOOD
    text: "최근 2~3일 내에 날음식(회, 육회 등)이나 덜 익힌 음식을 드신 적이 있나요?"
    type: buttons
    options:
      - text: "네, 있어요"
        next_id: PMH_GENERAL
      - text: "아니요, 없어요"
        next_id: PMH_GENERAL

  - id: PMH_GENERAL
    text: "현재 꾸준히 복용 중인 약이나 앓고 있는 질환(당뇨, 면역질환 등)이 있나요? 약물이나 음식 알레르기가 있다면 함께 알려주세요."
    type: free_text
    next_id: CLOSING

  - id: CLOSING
    text: "감사합니다. 질문이 모두 끝났습니다.\n답변해주신 내용은 의사 선생님께 잘 전달하여, 잠시 후 진료실에서 더 자세한 상담이 이루어질 수 있도록 돕겠습니다."
    type: final

  - id: END_OTHER_SYMPTOM
    text: "알겠습니다. 이 챗봇은 설사/복통 관련 문진을 돕고 있습니다. 다른 증상은 의사 선생님께 직접 말씀해주세요."
    type: final
