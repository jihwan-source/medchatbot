# scenarios/headache.yaml
# 두통 문진 시나리오

# 챗봇의 이름과 시작 질문 ID
name: "두통 문진"
initial_question_id: GREETING

# 각 질문 단계(node)들의 목록
nodes:
  - id: GREETING
    text: |
      안녕하세요! OOO 의원 AI 문진 챗봇입니다.
      현재 가장 불편한 증상이 '두통(머리 아픔)'이 맞으실까요?
    type: buttons
    options:
      - text: "네, 맞아요"
        next_id: RED_FLAG_THUNDERCLAP
      - text: "아니요, 다른 증상이에요"
        next_id: END_OTHER_SYMPTOM

  - id: RED_FLAG_THUNDERCLAP
    text: |
      ※ 안전한 진료를 위해 가장 중요한 질문입니다.
      아래 질문에 신중하게 답변해주세요.
      혹시 "태어나서 처음 경험하는 듯한, 갑작스러운 극심한 두통"이신가요?
    type: buttons
    options:
      - text: "네, 그렇습니다"
        next_id: END_EMERGENCY_WARNING
      - text: "아니요, 그 정도는 아닙니다"
        next_id: RED_FLAG_GENERAL

  - id: RED_FLAG_GENERAL
    text: |
      아래 증상 중 하나라도 해당되는 것이 있다면 꼭 알려주세요.
      1. 열이 나거나 목이 뻣뻣하다.
      2. 몸의 일부에 마비가 오거나, 말이 어눌해진다.
      3. 의식이 흐려지거나 경련을 했다.
      4. 최근 머리를 다친 적이 있다.
    type: buttons
    options:
      - text: "네, 해당하는 증상이 있어요"
        next_id: HPI_ONSET
      - text: "아니요, 모두 괜찮아요"
        next_id: HPI_ONSET
  
  - id: HPI_ONSET
    text: "두통은 언제부터 시작되었나요?"
    type: buttons
    options:
      - text: "오늘"
        next_id: HPI_QUALITY
      - text: "어제"
        next_id: HPI_QUALITY
      - text: "수일 전"
        next_id: HPI_QUALITY
      - text: "수주 이상"
        next_id: HPI_QUALITY

  - id: HPI_QUALITY
    text: "머리가 어떻게 아프신가요?"
    type: buttons
    options:
      - text: "맥박처럼 욱신거린다"
        next_id: HPI_LOCATION
      - text: "꽉 조이는 듯 아프다"
        next_id: HPI_LOCATION
      - text: "기타"
        next_id: HPI_LOCATION

  - id: HPI_LOCATION
    text: "통증의 위치는 어디인가요?"
    type: buttons
    options:
      - text: "머리 한쪽"
        next_id: HPI_SEVERITY
      - text: "머리 전체"
        next_id: HPI_SEVERITY
      - text: "뒷머리"
        next_id: HPI_SEVERITY
      - text: "기타"
        next_id: HPI_SEVERITY

  - id: HPI_SEVERITY
    text: "두통 때문에 일상생활에 지장이 있나요?"
    type: buttons
    options:
      - text: "심한 지장이 있다"
        next_id: HPI_ASSOCIATED_SX
      - text: "조금 불편하다"
        next_id: HPI_ASSOCIATED_SX
      - text: "지장 없다"
        next_id: HPI_ASSOCIATED_SX

  - id: HPI_ASSOCIATED_SX
    text: "두통이 있을 때, 아래 증상이 함께 나타나나요? (해당하는 것 모두 선택)"
    type: buttons
    options:
      - text: "속이 메스껍거나 구토를 한다"
      - text: "빛이나 소리에 예민해진다"
      - text: "해당 없음"
    next_id: PMH_DIAGNOSIS

  - id: PMH_DIAGNOSIS
    text: "이전에 병원에서 '편두통'이나 다른 종류의 두통을 진단받은 적이 있나요?"
    type: buttons
    options:
      - text: "네, 있어요"
        next_id: PMH_GENERAL
      - text: "아니요, 없어요"
        next_id: PMH_GENERAL

  - id: PMH_GENERAL
    text: "현재 꾸준히 복용 중인 약이나 앓고 있는 질환이 있나요? 약물이나 음식 알레르기가 있다면 함께 알려주세요."
    type: free_text
    next_id: CLOSING

  - id: CLOSING
    text: "감사합니다. 질문이 모두 끝났습니다. 답변해주신 내용은 의사 선생님께 잘 전달하겠습니다."
    type: final

  - id: END_EMERGENCY_WARNING
    text: |
      의료진에게 즉시 알리고, 필요한 경우 119에 연락하세요.
      지금 느끼는 증상은 즉각적인 의학적 확인이 필요할 수 있습니다. 챗봇 문진을 중단하고 바로 의료진의 도움을 받으세요.
    type: final

  - id: END_OTHER_SYMPTOM
    text: "알겠습니다. 이 챗봇은 두통 관련 문진을 돕고 있습니다. 다른 증상은 의사 선생님께 직접 말씀해주세요."
    type: final
